<html>
<head>
<script type="text/javascript" src="video.js"></script>
<script type="text/javascript" src="./graphics/canvas.js"></script>
</head>
<body>

  <div>
    <video id="camera" width="640" height="480" autoplay style="display: inline;"></video>
    <canvas width="640" id="videocanvas" height="480" style="display: inline;"></canvas>
    <canvas width="640" id="audiocanvas" height="160" style="display: inline;"></canvas>
  </div>

  <script type="text/javascript">

  window.addEventListener('load', function() {Video();}, false);
  
  // Setup the Audio and Video
  function Video() {

    navigator.getUserMedia = navigator.getUserMedia || navigator.webkitGetUserMedia || navigator.mozGetUserMedia || navigator.msGetUserMedia;
    window.URL = window.URL || window.webkitURL || window.msURL || window.mozURL;

    videoc = new Canvas(document.getElementById("videocanvas"));
    audioc = new Canvas(document.getElementById("audiocanvas"));

    var constraints = {video: true, audio: true};
    navigator.getUserMedia(constraints, (function(stream)
    {
      PlayVideo(stream);
      //PlayAudio(stream);
    }),
    (function(err) {
      console.log("The following error occured: " + err.name);
    }));
  }

  // play the <video>
  function PlayVideo(stream) {
    video = document.querySelector('video');
    video.src = window.URL.createObjectURL(stream);
    video.onloadedmetadata = function(e) {
      video.play();
    }
    CanvasVideo(video);
  }

  </script>

</body>
</html>
